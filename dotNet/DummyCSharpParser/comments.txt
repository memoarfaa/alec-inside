Программа будет неправильно считать число классов если объявление
класса выполняется более одного раза и зависит от дериктив условной компиляции.
Например:

#if TEST

  class c1 {

#else

  class c2 {

#endif

  ...

  }

Частичные классы тоже будут считаться неправильно. Это проблема, кстати, решается достаточно просто.

